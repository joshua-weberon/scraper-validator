(this["webpackJsonpscraper-validator"]=this["webpackJsonpscraper-validator"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(9),i=n.n(c),s=(n(15),n(16),n(8)),l=n.n(s),o=n(10),u=n(3),d=function(e){return null!=e?e.trim():""},m=function(e){return e.replace(/^[,]/,"").replace(/[,]$/,"")},b=function(e){return e.replace(/[^\d.]/g,"")},j=function(e){var t=e.replace(/[^\d\/\-]/g,""),n=function(e){var t=new Date(e);return new Date(t.getTime()-60*t.getTimezoneOffset()*1e3)}(t);return console.log({inputDate:e,cleanData:t,date:n}),"".concat(n.getUTCMonth()+1,"/").concat(n.getUTCDate(),"/").concat(n.getUTCFullYear())},f=function(e){return e.replace("sqft","").trim()},p=function(e){return 0==+e?"":e},O=function(e){for(var t=e,n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return a.forEach((function(e){t=e(t)})),t},v=function(e){return e},h=function(e){return O(e,d,m)},x=function(e){return O(e,d,m)},N=function(e){return O(e,d,j)},C={Summary:{street:{label:"Street",sourceCleaner:v,inputCleaner:h,image:"street.PNG"},city:{label:"City",sourceCleaner:v,inputCleaner:x,image:"city.PNG"},state:{label:"State",sourceCleaner:v,inputCleaner:function(e){return O(e,d,m)},image:"state.PNG"},zip:{label:"Zip",sourceCleaner:v,inputCleaner:function(e){return O(e,d,m)},image:"zip.PNG"},price:{label:"RMV",sourceCleaner:v,inputCleaner:function(e){return O(e,d,b)},image:"price.PNG"},bedrooms:{label:"Bedrooms",sourceCleaner:v,inputCleaner:function(e){return O(e,d,b)},image:"bedrooms.PNG"},bathrooms:{label:"Bathrooms",sourceCleaner:v,inputCleaner:function(e){return O(e,d,b)},image:"bathrooms.PNG"},livingareasqft:{label:"Living Area Sqft",sourceCleaner:v,inputCleaner:function(e){return O(e,f,d,b)},image:"livingareasqft.PNG"},hometype:{label:"Type",sourceCleaner:v,inputCleaner:function(e){return O(e,d)},image:"hometype.PNG"},soldprice:{label:"Last Sold Price",sourceCleaner:v,inputCleaner:function(e){return O(e,d,b,p)},image:"soldprice.PNG"},soldDate:{label:"Sold Date",sourceCleaner:N,inputCleaner:N,image:"solddate.PNG"},"Estimate/sqft":{label:"Price by sq ft",sourceCleaner:v,inputCleaner:function(e){return O(e,d,b)},image:"estimatesqft.PNG"},ownernames:{label:"Owner Name (Public)",sourceCleaner:v,inputCleaner:function(e){return O(e,d)},image:"ownernames.PNG"},mailingaddress:{label:"Mailing Address",sourceCleaner:v,inputCleaner:function(e){return O(e,d)},image:"mailingaddress.PNG"},apn:{label:"Parecel Number",sourceCleaner:v,inputCleaner:function(e){return O(e,d)},image:"apn.PNG"}}},g=["apn","scraperVersion"],V=Object.keys(C),y=function(e){return new Promise((function(t){var n=e,a=n[0],r={base64:"",fileList:n},c=new FileReader;c.onloadend=function(e){r.base64=c.result,t(r)},c.readAsText(a)}))},I=function(e){return new Promise((function(t){window.csvtojsonV2().fromString(e).then((function(e){t(e)}))}))},k=function(e,t,n){return n.map((function(n,a){var r=t.reduce((function(e,t){return e[t]=n[t],e}),{}),c=0==a;return Object.keys(e).reduce((function(t,a){var r=e[a],c=r.label,i=r.image,s=r.sourceCleaner,l="function"==typeof s?s(n[a]):n[a];return t.forms[a]={keyName:a,label:c,image:i,userInput:"",scrapeVal:l,cleanInput:"",isValid:null},t}),{identifier:r,index:a,isValid:null,forms:{},isSelected:c,isComplete:!1,input:n})}))},S=n(0);var F=function(e){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)("input",{type:"file",onChange:e.handleFiles,accept:".csv",className:"react-file-reader-input",ref:e.setFileInput})})},P=n(4);var w=function(e){var t=e.data,n=e.setData;return Object(S.jsx)("div",{className:"tab-container",children:t.map((function(e){return function(e,t,n){var a=e.index,r=function(e,t){var n="tab-btn";return(n+=t?" tab-complete":" tab-incomplete")+(e?" tab-active":"")}(e.isSelected,e.isComplete);return Object(S.jsx)("div",{className:r,onClick:function(){var e=Object(P.a)(n);e.forEach((function(e,t){e.isSelected=t==a})),t(e)},children:a+1},"tab_".concat(a))}(e,n,t)}))})},G=n(2),D={null:"Pending",undefined:"Pending",true:"Good",false:"Bad"};var B=function(e){var t=e.data;return Object(S.jsx)("div",{className:"titles-container",children:t.filter((function(e){return e.isSelected})).map((function(e){return function(e){var t=e.input,n=e.forms,a=e.isComplete,r=e.isValid,c=e.index,i=t.scrapetimestamp,s=t.scraperVersion,l=t.nxtcloudpath.split("/").pop(),o=Object.keys(n).reduce((function(e,t){var a=n[t];return e.totalForms+=1,e.totalFormsComplete+=1==a.isValid||0==a.isValid&&""!=a.userInput.trim()?1:0,e}),{totalForms:0,totalFormsComplete:0}),u=o.totalForms,d=o.totalFormsComplete;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"title-box",children:"File name: ".concat(l)},"fileName_".concat(c)),Object(S.jsx)("div",{className:"title-box",children:"Scraper Version: ".concat(s)},"scraperVersion_".concat(c)),Object(S.jsx)("div",{className:"title-box",children:"Scraped timestamp: ".concat(i)},"scrapetimestamp_".concat(c)),Object(S.jsx)("div",{className:"title-box",children:"Total Inputs: ".concat(u)},"totalForms_".concat(c)),Object(S.jsx)("div",{className:"title-box",children:"Total Inputs assessed: ".concat(d)},"totalFormsComplete_".concat(c)),Object(S.jsx)("div",{className:"title-box",children:"Complete? ".concat(a)},"isComplete_".concat(c)),Object(S.jsx)("div",{className:"title-box",children:"Status: ".concat(D[r])},"isValid_".concat(c))]})}(e)}))})},_=function(e){return e.reduce((function(e,t){return 0==t.isValid&&e.push.apply(e,Object(P.a)(function(e){var t=e.input,n={recordid:t.recordid,apn:t.apn,scraperVersion:t.scraperVersion,crawltimestamp:t.crawltimestamp,scrapetimestamp:t.scrapetimestamp,filepath:t.filepath};return Object.keys(e.forms).reduce((function(t,a){var r=e.forms[a];if(0==r.isValid){var c=r.scrapeVal,i=r.userInput,s=r.cleanInput;t.push(Object(G.a)(Object(G.a)({},n),{},{field:a,scrapeVal:c,userInput:i,cleanInput:s}))}return t}),[])}(t))),e}),[])},U=function(e){var t=_(e),n=function(e){var t=-1;return e.reduce((function(e,n){return Object.keys(n).forEach((function(n){e[n]=null==e[n]?++t:e[n]})),e}),{})}(t),a=Object.keys(n).reduce((function(e,t){return e[[n[t]]]=t,e}),[]),r="data:text/csv;charset=utf-8,"+t.reduce((function(e,t){var a=[];return Object.keys(t).forEach((function(e){a[n[e]]=t[e]})),e.push(a),e}),[a]).map((function(e){return e.join(",")})).join("\n");return encodeURI(r)},q=function(e,t,n){var a=null==t||""===t.trim(),r=null==n||""===n.trim(),c=e.length>0&&!a&&!r,i=e.reduce((function(e,t){return e.isValid=e.isValid&&1==t.isValid,e.isComplete=e.isComplete&&1==t.isComplete,e}),{isValid:c,isComplete:c}),s=i.isValid,l=i.isComplete;if(!s&&l)return Object(S.jsx)("a",{className:"title-button anchor-button",href:U(e),download:"invalid_csv.csv",children:"Get CSV with invalids"})};var E=function(e){var t=e.data,n=e.userName,a=e.batchId;return Object(S.jsx)("div",{className:"buttons-container",children:q(t,n,a)})};var T=function(e){return Object(S.jsxs)("div",{className:"header-container",children:[Object(S.jsx)(B,Object(G.a)({},e)),Object(S.jsx)(E,Object(G.a)({},e))]})},A=function(e){var t="status-btn good-btn";return 1==e&&(t+=" active"),t},J=function(e){var t="status-btn bad-btn";return 0==e&&(t+=" active"),t},M=function(e){var t=function(t){var n=t.target.value;e.handleUserInput(n)},n=function(){return Object(S.jsxs)("div",{className:"correction-box",children:[Object(S.jsx)("label",{children:"Correct Value"}),Object(S.jsx)("input",{className:"correct-input",type:"text",value:e.userInput,onChange:t})]})};return Object(S.jsxs)("div",{className:"content-container",children:[Object(S.jsxs)("div",{className:"content-title-container",children:[Object(S.jsx)("span",{className:"content-title",children:e.label}),Object(S.jsx)("span",{className:"content-status",children:D[e.isValid]})]}),Object(S.jsxs)("div",{className:"content-body-container",children:[Object(S.jsx)("div",{className:"img",children:Object(S.jsx)("img",{src:"img/".concat(e.image),alt:""})}),Object(S.jsxs)("div",{className:"value-box",children:["Value: ",Object(S.jsx)("span",{className:"value",children:e.scrapeVal})]}),Object(S.jsxs)("div",{className:"row-buttons-container",children:[Object(S.jsx)("div",{className:A(e.isValid),onClick:e.setFormGood,children:"Good"}),Object(S.jsx)("div",{className:J(e.isValid),onClick:e.setFormBad,children:"BAD"})]}),function(e){if(0==e)return n()}(e.isValid)]})]})},z=function(e,t,n,a){return Object(S.jsx)("div",{className:"body-container",children:Object.keys(e.forms).map((function(r){return function(e,t,n,a,r){return Object(S.jsx)("span",{children:Object(S.jsx)(M,Object(G.a)(Object(G.a)({},e),{},{handleUserInput:function(c){var i=n[t].forms[e.keyName],s=null!=r[e.keyName]?r[e.keyName].inputCleaner:null,l="function"==typeof s?s(c):c,o=Object(G.a)(Object(G.a)({},i),{},{userInput:c,cleanInput:l}),u=Object(P.a)(n);u[t].forms[e.keyName]=o;var d=!0;Object.keys(u[t].forms).forEach((function(e){var n=u[t].forms[e];d=d&&null!=n.isValid&&""!=c.trim()})),u[t].isComplete=d,u[t].isValid=!d&&u[t].isValid,a(u)},setFormGood:function(){var r=n[t].forms[e.keyName],c=Object(G.a)(Object(G.a)({},r),{},{isValid:!0}),i=Object(P.a)(n);i[t].forms[e.keyName]=c;var s=!0,l=!0,o=!1;Object.keys(i[t].forms).forEach((function(e){var n=i[t].forms[e];o=1==n.isValid||0==n.isValid&&""!=n.userInput.trim(),l=l&&1==n.isValid,s=s&&null!=n.isValid&&o})),i[t].isComplete=s,i[t].isValid=s?l:i[t].isValid,a(i)},setFormBad:function(){var r=n[t].forms[e.keyName];if(null==r.isValid||1==r.isValid){var c=Object(G.a)(Object(G.a)({},r),{},{isValid:!1,userInput:"",cleanInput:""}),i=Object(P.a)(n);i[t].forms[e.keyName]=c,i[t].isComplete=!1,i[t].isValid=null,a(i)}}}))},t+e.keyName)}(e.forms[r],e.index,t,n,a)}))},e.index)};var L=function(e){var t=e.data,n=e.setData,a=e.config;return t.filter((function(e){return 1==e.isSelected})).map((function(e){return z(e,t,n,a)}))};var R=function(e){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(L,Object(G.a)({},e))})};var Y=function(e){var t=e.title,n=e.value,a=e.setValue;return Object(S.jsxs)("div",{className:"identification-box",children:[Object(S.jsx)("label",{children:t}),Object(S.jsx)("input",{className:"correct-input",type:"text",value:n,onChange:function(e){a(e.target.value)}})]})},Z=function(e){var t=e.userName,n=e.setUserName;return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(Y,{title:"User name",value:t,setValue:n})})},$=function(e){var t=e.batchId,n=e.setBatchId;return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(Y,{title:"Batch ID",value:t,setValue:n})})};var H=function(e){return Object(S.jsxs)("div",{className:"identification",children:[Object(S.jsx)(Z,Object(G.a)({},e)),Object(S.jsx)($,Object(G.a)({},e))]})};var K=function(e){var t,n=e.userName,a=e.batchId,r=e.data,c=null==n||""===n.trim(),i=null==a||""===a.trim();return r.length>0&&(c||i)&&(t=function(e,t){var n=e.reduce((function(e,t){return e.isValid=e.isValid&&1==t.isValid,e.isComplete=e.isComplete&&1==t.isComplete,e}),{isValid:!0,isComplete:!0}),a=n.isValid,r=n.isComplete,c=Object.keys(t).filter((function(e){return 1==t[e]}));if(!a&&r&&c.length>0)return Object(S.jsx)("div",{className:"error-top",children:"Please Provide required info: [".concat(c,"]")})}(r,{"User name":c,"Batch ID":i})),null==t?Object(S.jsx)(S.Fragment,{}):t},Q="".concat("scraper_quality","_userid"),W=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=(t[0],t[1]),r=Object(a.useState)([]),c=Object(u.a)(r,2),i=c[0],s=c[1],d=Object(a.useState)(V[0]),m=Object(u.a)(d,2),b=m[0],j=(m[1],Object(a.useState)({})),f=Object(u.a)(j,2),p=f[0],O=f[1],v=function(e,t){var n=Object(a.useState)((function(){var n=window.localStorage.getItem(t);return null!==n?JSON.parse(n):e})),r=Object(u.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){window.localStorage.setItem(t,JSON.stringify(c))}),[t,c]),[c,i]}(null,Q),h=Object(u.a)(v,2),x=h[0],N=h[1],P=Object(a.useState)(""),G=Object(u.a)(P,2),D=G[0],B=G[1],_=function(){var e=Object(o.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t.target.files);case 2:return n=e.sent,e.next=5,I(n.base64);case 5:a=e.sent,r=k(C[b],g,a),O(C[b]),s(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"app",children:[Object(S.jsxs)("header",{children:[Object(S.jsx)(F,{handleFiles:_,setFileInput:n,setBatchId:B}),Object(S.jsx)(H,{userName:x,setUserName:N,batchId:D,setBatchId:B}),Object(S.jsx)(K,{data:i,userName:x,batchId:D}),Object(S.jsx)(T,{data:i,userName:x,batchId:D}),Object(S.jsx)(w,{data:i,setData:s})]}),Object(S.jsx)("main",{children:Object(S.jsx)(R,{data:i,setData:s,config:p,userName:x,batchId:D})})]})};i.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(W,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.39ce6b5d.chunk.js.map