(this["webpackJsonpscraper-validator"]=this["webpackJsonpscraper-validator"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(9),i=n.n(r),s=(n(15),n(16),n(8)),l=n.n(s),o=n(10),u=n(3),d=function(e){return null!=e?e.trim():""},j=function(e){return e.replace(/^[,]/,"").replace(/[,]$/,"")},m=function(e){for(var t=e,n=arguments.length,a=new Array(n>1?n-1:0),c=1;c<n;c++)a[c-1]=arguments[c];return a.forEach((function(e){t=e(t)})),t},b=function(e){return e},f=function(e){return m(e,d,j)},p=function(e){return m(e,d,j)},O={Summary:{street:{label:"Street",sourceCleaner:b,inputCleaner:f,image:"street.PNG"},city:{label:"City",sourceCleaner:b,inputCleaner:p,image:"city.PNG"}}},v=["apn","scraperVersion"],h=Object.keys(O),x=function(e){return new Promise((function(t){var n=e,a=n[0],c={base64:"",fileList:n},r=new FileReader;r.onloadend=function(e){c.base64=r.result,t(c)},r.readAsText(a)}))},N=function(e){return new Promise((function(t){window.csvtojsonV2().fromString(e).then((function(e){t(e)}))}))},V=function(e,t,n){return n.map((function(n,a){var c=t.reduce((function(e,t){return e[t]=n[t],e}),{}),r=0==a;return Object.keys(e).reduce((function(t,a){var c=e[a],r=c.label,i=c.image,s=c.sourceCleaner,l="function"==typeof s?s(n[a]):n[a];return t.forms[a]={keyName:a,label:r,image:i,userInput:"",scrapeVal:l,cleanInput:"",isValid:null},t}),{identifier:c,index:a,isValid:null,forms:{},isSelected:r,isComplete:!1,input:n})}))},y=n(0);var C=function(e){return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("input",{type:"file",onChange:e.handleFiles,accept:".csv",className:"react-file-reader-input",ref:e.setFileInput})})},g=n(4);var I=function(e){var t=e.data,n=e.setData;return Object(y.jsx)("div",{className:"tab-container",children:t.map((function(e){return function(e,t,n){var a=e.index,c=function(e,t){var n="tab-btn";return(n+=t?" tab-complete":" tab-incomplete")+(e?" tab-active":"")}(e.isSelected,e.isComplete);return Object(y.jsx)("div",{className:c,onClick:function(){var e=Object(g.a)(n);e.forEach((function(e,t){e.isSelected=t==a})),t(e)},children:a+1},"tab_".concat(a))}(e,n,t)}))})},k=n(2),F={null:"Pending",undefined:"Pending",true:"Good",false:"Bad"};var S=function(e){var t=e.data;return Object(y.jsx)("div",{className:"titles-container",children:t.filter((function(e){return e.isSelected})).map((function(e){return function(e){var t=e.input,n=e.forms,a=e.isComplete,c=e.isValid,r=e.index,i=t.scrapetimestamp,s=t.scraperVersion,l=t.nxtcloudpath.split("/").pop(),o=Object.keys(n).reduce((function(e,t){var a=n[t];return e.totalForms+=1,e.totalFormsComplete+=1==a.isValid||0==a.isValid&&""!=a.userInput.trim()?1:0,e}),{totalForms:0,totalFormsComplete:0}),u=o.totalForms,d=o.totalFormsComplete;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"title-box",children:"File name: ".concat(l)},"fileName_".concat(r)),Object(y.jsx)("div",{className:"title-box",children:"Scraper Version: ".concat(s)},"scraperVersion_".concat(r)),Object(y.jsx)("div",{className:"title-box",children:"Scraped timestamp: ".concat(i)},"scrapetimestamp_".concat(r)),Object(y.jsx)("div",{className:"title-box",children:"Total Inputs: ".concat(u)},"totalForms_".concat(r)),Object(y.jsx)("div",{className:"title-box",children:"Total Inputs assessed: ".concat(d)},"totalFormsComplete_".concat(r)),Object(y.jsx)("div",{className:"title-box",children:"Complete? ".concat(a)},"isComplete_".concat(r)),Object(y.jsx)("div",{className:"title-box",children:"Status: ".concat(F[c])},"isValid_".concat(r))]})}(e)}))})},w=function(e){return e.reduce((function(e,t){return 0==t.isValid&&e.push.apply(e,Object(g.a)(function(e){var t=e.input,n={recordid:t.recordid,apn:t.apn,scraperVersion:t.scraperVersion,crawltimestamp:t.crawltimestamp,scrapetimestamp:t.scrapetimestamp,filepath:t.filepath};return Object.keys(e.forms).reduce((function(t,a){var c=e.forms[a];if(0==c.isValid){var r=c.scrapeVal,i=c.userInput,s=c.cleanInput;t.push(Object(k.a)(Object(k.a)({},n),{},{field:a,scrapeVal:r,userInput:i,cleanInput:s}))}return t}),[])}(t))),e}),[])},_=function(e){var t=w(e),n=function(e){var t=-1;return e.reduce((function(e,n){return Object.keys(n).forEach((function(n){e[n]=null==e[n]?++t:e[n]})),e}),{})}(t),a=Object.keys(n).reduce((function(e,t){return e[[n[t]]]=t,e}),[]),c="data:text/csv;charset=utf-8,"+t.reduce((function(e,t){var a=[];return Object.keys(t).forEach((function(e){a[n[e]]=t[e]})),e.push(a),e}),[a]).map((function(e){return e.join(",")})).join("\n");return encodeURI(c)},B=function(e,t,n){var a=null==t||""===t.trim(),c=null==n||""===n.trim(),r=e.length>0&&!a&&!c,i=e.reduce((function(e,t){return e.isValid=e.isValid&&1==t.isValid,e.isComplete=e.isComplete&&1==t.isComplete,e}),{isValid:r,isComplete:r}),s=i.isValid,l=i.isComplete;if(!s&&l)return Object(y.jsx)("a",{className:"title-button anchor-button",href:_(e),download:"invalid_csv.csv",children:"Get CSV with invalids"})};var E=function(e){var t=e.data,n=e.userName,a=e.batchId;return Object(y.jsx)("div",{className:"buttons-container",children:B(t,n,a)})};var P=function(e){return Object(y.jsxs)("div",{className:"header-container",children:[Object(y.jsx)(S,Object(k.a)({},e)),Object(y.jsx)(E,Object(k.a)({},e))]})},D=function(e){var t="status-btn good-btn";return 1==e&&(t+=" active"),t},G=function(e){var t="status-btn bad-btn";return 0==e&&(t+=" active"),t},U=function(e){var t=function(t){var n=t.target.value;e.handleUserInput(n)},n=function(){return Object(y.jsxs)("div",{className:"correction-box",children:[Object(y.jsx)("label",{children:"Correct Value"}),Object(y.jsx)("input",{className:"correct-input",type:"text",value:e.userInput,onChange:t})]})};return Object(y.jsxs)("div",{className:"content-container",children:[Object(y.jsxs)("div",{className:"content-title-container",children:[Object(y.jsx)("span",{className:"content-title",children:e.label}),Object(y.jsx)("span",{className:"content-status",children:F[e.isValid]})]}),Object(y.jsxs)("div",{className:"content-body-container",children:[Object(y.jsx)("div",{className:"img",children:Object(y.jsx)("img",{src:"img/".concat(e.image),alt:""})}),Object(y.jsxs)("div",{className:"value-box",children:["Value: ",Object(y.jsx)("span",{className:"value",children:e.scrapeVal})]}),Object(y.jsxs)("div",{className:"row-buttons-container",children:[Object(y.jsx)("div",{className:D(e.isValid),onClick:e.setFormGood,children:"Good"}),Object(y.jsx)("div",{className:G(e.isValid),onClick:e.setFormBad,children:"BAD"})]}),function(e){if(0==e)return n()}(e.isValid)]})]})},J=function(e,t,n,a){return Object(y.jsx)("div",{className:"body-container",children:Object.keys(e.forms).map((function(c){return function(e,t,n,a,c){return Object(y.jsx)("span",{children:Object(y.jsx)(U,Object(k.a)(Object(k.a)({},e),{},{handleUserInput:function(r){var i=n[t].forms[e.keyName],s=null!=c[e.keyName]?c[e.keyName].inputCleaner:null,l="function"==typeof s?s(r):r,o=Object(k.a)(Object(k.a)({},i),{},{userInput:r,cleanInput:l}),u=Object(g.a)(n);u[t].forms[e.keyName]=o;var d=!0;Object.keys(u[t].forms).forEach((function(e){var n=u[t].forms[e];d=d&&null!=n.isValid&&""!=r.trim()})),u[t].isComplete=d,u[t].isValid=!d&&u[t].isValid,a(u)},setFormGood:function(){var c=n[t].forms[e.keyName],r=Object(k.a)(Object(k.a)({},c),{},{isValid:!0}),i=Object(g.a)(n);i[t].forms[e.keyName]=r;var s=!0,l=!0,o=!1;Object.keys(i[t].forms).forEach((function(e){var n=i[t].forms[e];o=1==n.isValid||0==n.isValid&&""!=n.userInput.trim(),l=l&&1==n.isValid,s=s&&null!=n.isValid&&o})),i[t].isComplete=s,i[t].isValid=s?l:i[t].isValid,a(i)},setFormBad:function(){var c=n[t].forms[e.keyName];if(null==c.isValid||1==c.isValid){var r=Object(k.a)(Object(k.a)({},c),{},{isValid:!1,userInput:"",cleanInput:""}),i=Object(g.a)(n);i[t].forms[e.keyName]=r,i[t].isComplete=!1,i[t].isValid=null,a(i)}}}))},t+e.keyName)}(e.forms[c],e.index,t,n,a)}))},e.index)};var A=function(e){var t=e.data,n=e.setData,a=e.config;return t.filter((function(e){return 1==e.isSelected})).map((function(e){return J(e,t,n,a)}))};var T=function(e){return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(A,Object(k.a)({},e))})};var q=function(e){var t=e.title,n=e.value,a=e.setValue;return Object(y.jsxs)("div",{className:"identification-box",children:[Object(y.jsx)("label",{children:t}),Object(y.jsx)("input",{className:"correct-input",type:"text",value:n,onChange:function(e){a(e.target.value)}})]})},R=function(e){var t=e.userName,n=e.setUserName;return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(q,{title:"User name",value:t,setValue:n})})},L=function(e){var t=e.batchId,n=e.setBatchId;return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(q,{title:"Batch ID",value:t,setValue:n})})};var M=function(e){return Object(y.jsxs)("div",{className:"identification",children:[Object(y.jsx)(R,Object(k.a)({},e)),Object(y.jsx)(L,Object(k.a)({},e))]})};var $=function(e){var t,n=e.userName,a=e.batchId,c=e.data,r=null==n||""===n.trim(),i=null==a||""===a.trim();return c.length>0&&(r||i)&&(t=function(e,t){var n=e.reduce((function(e,t){return e.isValid=e.isValid&&1==t.isValid,e.isComplete=e.isComplete&&1==t.isComplete,e}),{isValid:!0,isComplete:!0}),a=n.isValid,c=n.isComplete,r=Object.keys(t).filter((function(e){return 1==t[e]}));if(!a&&c&&r.length>0)return Object(y.jsx)("div",{className:"error-top",children:"Please Provide required info: [".concat(r,"]")})}(c,{"User name":r,"Batch ID":i})),null==t?Object(y.jsx)(y.Fragment,{}):t},z="".concat("scraper_quality","_userid"),H=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=(t[0],t[1]),c=Object(a.useState)([]),r=Object(u.a)(c,2),i=r[0],s=r[1],d=Object(a.useState)(h[0]),j=Object(u.a)(d,2),m=j[0],b=(j[1],Object(a.useState)({})),f=Object(u.a)(b,2),p=f[0],g=f[1],k=function(e,t){var n=Object(a.useState)((function(){var n=window.localStorage.getItem(t);return null!==n?JSON.parse(n):e})),c=Object(u.a)(n,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){window.localStorage.setItem(t,JSON.stringify(r))}),[t,r]),[r,i]}(null,z),F=Object(u.a)(k,2),S=F[0],w=F[1],_=Object(a.useState)(""),B=Object(u.a)(_,2),E=B[0],D=B[1],G=function(){var e=Object(o.a)(l.a.mark((function e(t){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t.target.files);case 2:return n=e.sent,e.next=5,N(n.base64);case 5:a=e.sent,c=V(O[m],v,a),g(O[m]),s(c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"app",children:[Object(y.jsxs)("header",{children:[Object(y.jsx)(C,{handleFiles:G,setFileInput:n,setBatchId:D}),Object(y.jsx)(M,{userName:S,setUserName:w,batchId:E,setBatchId:D}),Object(y.jsx)($,{data:i,userName:S,batchId:E}),Object(y.jsx)(P,{data:i,userName:S,batchId:E}),Object(y.jsx)(I,{data:i,setData:s})]}),Object(y.jsx)("main",{children:Object(y.jsx)(T,{data:i,setData:s,config:p,userName:S,batchId:E})})]})};i.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(H,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.cbd1f830.chunk.js.map